<!DOCTYPE html>
<html>
  <head>
    <title>Jotspace</title>
    <link rel="stylesheet" href="static/style.css"/>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="icon" type="image/png" href="static/favicon.png">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/lucide.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/lucide.min.js"></script>
  </head>
  <body>
    <div class="homepage">
      <div class="hero-content">
        <div class="logo-container">
          <i data-lucide="pen-line" class="logo-icon"></i>
          <h1 class="big">Jotspace</h1>
        </div>
        <p class="hero-text">Your space for quick notes, code snippets, and creative thoughts</p>
        <button id="submitBtn" class="openbtn">Create a Jot</button>
      </div>
    </div>

    <div class="content">
      <h1>Create a jot</h1>
      <div class="container">
        <div class="left">
          <div class="section-header">
            <i data-lucide="layout" class="section-icon"></i>
            <h2>Content</h2>
          </div>
          <textarea class="jotspace" placeholder="Write your thoughts, code, or notes here..."></textarea>
        </div>
        <div class="right">
          <div class="section-header">
            <i data-lucide="book" class="section-icon"></i>
            <h2>Details</h2>
          </div>
          <form class="form-container" action="/create_jot" method="post">
            <div class="input-group">
              <input type="text" placeholder="Name" class="name">
            </div>
            <div class="input-group">
              <input type="text" placeholder="Password (optional)" class="password" name="password" autocomplete="off">
            </div>
            <div class="input-group">
              <div class="select-wrapper">
                <select class="language">
                  <option value="Text">Text</option>
                  <option value="Python">Python</option>
                  <option value="Javascript">Javascript</option>
                  <option value="HTML">HTML</option>
                  <option value="CSS">CSS</option>
                  <option value="Java">Java</option>
                  <option value="PHP">PHP</option>
                  <option value="cpp">C++</option>
                </select>
                <i data-lucide="chevron-down" class="select-icon"></i>
              </div>
            </div>
            <div class="input-group">
              <div class="select-wrapper">
                <select class="topic">
                  <option value="No topic">Select a topic</option>
                  <option value="Augmented reality">Augmented reality</option>
                  <option value="Artificial intelligence">Artificial intelligence</option>
                  <!-- Keep all your existing options -->
                </select>
                <i data-lucide="chevron-down" class="select-icon"></i>
              </div>
            </div>
            <input type="hidden" name="redirect_to" value="/jot/{{ randomnumber }}">
            <button class="submit">Create Jot</button>
          </form>
        </div>
      </div>
    </div>

    <script>
      // Initialize Lucide icons
      lucide.createIcons();

      $(document).ready(function() {
        $(".submit").click(function(e) {
          e.preventDefault();

          var name = $(".name").val();
          var jotspace = $(".jotspace").val();
          var language = $(".language").val();
          var topic = $(".topic").val();
          var password = $(".password").val();

          if (name.trim() === "" || jotspace.trim() === "" || language.trim() === "" || topic.trim() === "") {
            alert("Please fill in all fields");
          } else {
            $.ajax({
              type: "POST",
              url: "/create_jot",
              data: { name: name, jotspace: jotspace, language: language, topic: topic, password: password },
              success: function(response) {
                window.location.href = "/jot/" + response;
              },
              error: function(xhr) {
                console.log(xhr.responseText);
              }
            });
          }
        });

        $(".homepage").on("click", "#submitBtn", function() {
          $(".content").show();
          $(".homepage").hide();
        });

        $("#returnBtn").click(function(e) {
          window.location.href = "https://jotspace.vercel.app";
          e.preventDefault();
        });
      });
    </script>    
  </body>
</html>
